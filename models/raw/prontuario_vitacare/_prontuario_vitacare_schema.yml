models:
  - name: raw_prontuario_vitacare__estoque_posicao
    description: ""
    columns:
      - name: id_estoque_posicao
        description: ""
      - name: area_programatica
        description: ""
      - name: id_cnes
        description: ""
        tests:
          - not_null
          - relationships:
              to: ref('dim_estabelecimento')
              field: id_cnes
          - assert_chegando_todas_unidades_de_saude:
              prontuario: vitacare
              filter: prontuario_estoque_tem_dado = 'sim'
              config:
                where: safe_cast(data_particao as date) = current_date()
                severity: warn
                error_if: ">10"
      - name: id_lote
        description: ""
      - name: id_material
        description: ""
      - name: id_atc
        description: ""
      - name: estabelecimento_nome
        description: ""
      - name: lote_data_cadastro
        description: ""
      - name: lote_data_vencimento
        description: ""
      - name: material_descricao
        description: ""
      - name: material_quantidade
        description: ""
      - name: data_particao
        description: ""
      - name: data_carga
        description: ""
  - name: raw_prontuario_vitacare__estoque_movimento
    description: ""
    columns:
      - name: id_estoque_movimento
        description: ""
      - name: area_programatica
        description: ""
      - name: id_cnes
        description: ""
        tests:
          - not_null
          - relationships:
              to: ref('dim_estabelecimento')
              field: id_cnes
          - assert_chegando_todas_unidades_de_saude:
              prontuario: vitacare
              filter: prontuario_estoque_tem_dado = 'sim'
              config:
                where: safe_cast(data_particao as date) = date_sub(current_date(), INTERVAL 1
                  DAY)
                severity: warn
                error_if: ">10"
      - name: id_lote
        description: ""
      - name: id_material
        description: ""
      - name: id_atc
        description: ""
      - name: estabelecimento_nome
        description: ""
      - name: material_descricao
        description: ""
      - name: estoque_movimento_data_hora
        description: ""
      - name: estoque_movimento_tipo
        description: ""
      - name: estoque_movimento_correcao_tipo
        description: ""
      - name: estoque_movimento_justificativa
        description: ""
      - name: dispensacao_prescritor_cns
        description: ""
      - name: dispensacao_paciente_cpf
        description: ""
      - name: dispensacao_paciente_cns
        description: ""
      - name: material_quantidade
        description: ""
      - name: data_particao
        description: ""
      - name: data_carga
        description: ""
