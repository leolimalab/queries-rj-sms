version: 2
models:
  - name: raw_sheets__estabelecimento_auxiliar
    description: Tabela contendo informações complementares das unidades de saúde
    columns:
      - name: id_cnes
        description: Código Nacional do Estabelecimento de Saúde
        tests:
          - unique
          - relationships:
              to: ref('dim_estabelecimento')
              field: id_cnes
      - name: nome_fantasia
        description: Nome fantasia de unidade de saúde
      - name: nome_limpo
        description: Nome fantasia removido o prefixo SMS e o sufixo contendo a área
          programática
      - name: nome_sigla
        description: Sigla da unidade de saúde
      - name: area_programatica
        description: Area programática da unidade de saúde
      - name: prontuario_tem
        description: Indica se unidade utiliza prontuario
      - name: prontuario_versao
        description: Para as unidades que utilizam pronturio, indica qual sistema de
          prontuario é utilizado
      - name: prontuario_estoque_tem_dado
        description: Indica se é esperado chegar dados de estoque (medicamentos e
          insumos) a partir do cnes desta unidade
      - name: prontuario_estoque_motivo_sem_dado
        description: Se prontuario_estoque_tem_dado = nao, indica o motivo de não ter dado
      - name: responsavel_sms
        description: Subcretaria responsável dentro da SMS
      - name: administracao
        description: Administradora da unidade de saúde.
  - name: raw_sheets__material_remume
    description: Tabela contendo os medicamentos e insumos que compõem a Relação
      Municipal de Medicamentos Essenciais (REMUME)
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - id_material
            - remume_grupo
            - estabelecimento_disponibilidade
    columns:
      - name: id_material
        description: Código de identificação do material cadastrado no prontuário
        tests:
          - relationships:
              to: ref('dim_material')
              field: id_material
      - name: remume_grupo
        description: Agrupor de materias
      - name: material_descricao_generica
        description: Descrição genérica do material
      - name: material_concetracao
        description: Concentração do medicamento
      - name: material_forma_farmaceutica
        description: Forma farmacêutica do medicamento
      - name: material_apresentacao
        description: Apresentação comercial do material
      - name: estabelecimento_disponibilidade
        description: Tipos de estabelecimento de saúde onde o material faz parte da
          relação essencial
      - name: estabelecimento_disponivel_cms
        description: Sem o material faz parte da relação essencial para Clínicas
          Municipais de Saúde
      - name: estabelecimento_disponivel_cf
        description: Sem o material faz parte da relação essencial para Clínicas da Família
      - name: estabelecimento_disponivel_policlinica
        description: Sem o material faz parte da relação essencial para Policlinicas
      - name: estabelecimento_disponivel_hospital
        description: Sem o material faz parte da relação essencial para Hospitais
      - name: estabelecimento_disponivel_maternidade
        description: Sem o material faz parte da relação essencial para Maternidades
      - name: estabelecimento_disponivel_caps
        description: Sem o material faz parte da relação essencial para Centros de
          Atenção Psicossocial
      - name: estabelecimento_disponivel_upa
        description: Sem o material faz parte da relação essencial para UPAs
      - name: estabelecimento_disponivel_cer
        description: Sem o material faz parte da relação essencial para Centro de
          Emergência Regionais
      - name: estabelecimento_disponivel_unidades_especificas
        description: >-
          Relação de cnes específicas  o material faz parte da relação
          essencial. 

          Campo utilizado para quando os casos qaundo o tipo de estabelecimento de saúde é muito abrangente.
